<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
  <div class="row">
    <h3>Signup</h3><hr/>
<!-- Signup form -->
<form class="form-horizontal ajax-post" id="signup" role="form" method="post" action="{% url 'rest_register' %}">{% csrf_token %}
    <div class="form-group">
      <label for="email" class="col-sm-2 control-label">Email</label>
      <div class="col-sm-10">
        <input name="email" type="text" class="form-control" id="email" placeholder="Email">
      </div>
    </div>
  
    <div class="form-group">
      <label for="username" class="col-sm-2 control-label">Username</label>
      <div class="col-sm-10">
        <input name="username" type="text" class="form-control" id="username" placeholder="Username">
      </div>
    </div>
  
    <div class="form-group">
      <label for="password" class="col-sm-2 control-label">Password</label>
      <div class="col-sm-10">
        <input name="password" type="password" class="form-control" id="password" placeholder="Password">
      </div>
    </div>
  
    <!-- <div class="form-group">
      <label for="password1" class="col-sm-2 control-label">Repeat password</label>
      <div class="col-sm-10">
        <input name="password1" type="password" class="form-control" id="password2" placeholder="Repeat password">
      </div>
    </div> -->
  
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-default" id='signup_form'>Sign up</button>
      </div>
    </div>
  
  </form>
  
  </div>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script>
        $("#signup_form").on("click", function(e) {
            var username = $("#username").val();
            var password = $("#password").val();
            
            console.log('hi');
            // "/user/create"
            $.post("/rest-auth/registration", {"username": username, "password": password})
            .success(function(data) {
                // var token = data["token"];
                // document.cookie = 'token='+token+";path=/";
                localStorage.set('token', data['token']);
                window.location.href = "http://localhost:8000/login";
            });
            // token = localStorage.get('token)

            /*
            $.ajax({
              url: "http://localhost:8000/api/read",
              headers: {
                'Authorization': "Token: " + token
              },
              success: function (data) {
                console.log(response)
              }
            })
            */
        });    
        </script>  

</body>
</html>